<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Kategori YÃ¶netimi - Admin Panel</title>
    <link rel="stylesheet" href="../../css/admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">GB</div>
            <h2>GenÃ§ Birey</h2>
        </div>

        <nav class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-section-title">Ana MenÃ¼</div>
                <a href="admin_dashboard.html" class="menu-item">
                    <i>ğŸ“Š</i> <span>Dashboard</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ“„</i> <span>Sayfalar</span>
                </a>
                <a href="YaziYonetimi.html" class="menu-item">
                    <i>ğŸ“</i> <span>Blog YazÄ±larÄ±</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ–¼ï¸</i> <span>Projeler</span>
                </a>
                <a href="#" class="menu-item">
                    <i>âš™ï¸</i> <span>Hizmetler</span>
                </a>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Ä°Ã§erik YÃ¶netimi</div>
                <a href="#" class="menu-item">
                    <i>ğŸ¨</i> <span>Medya</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ‘¥</i> <span>Ekip</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ’¬</i> <span>Yorumlar</span>
                </a>
                <a href="IletisimMesajlari.html" class="menu-item">
                    <i>ğŸ“§</i> <span>Mesajlar</span>
                </a>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Ayarlar</div>
                <a href="KategoriYonetimi.html" class="menu-item active">
                    <i>ğŸ·ï¸</i> <span>Kategoriler</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ‘¤</i> <span>KullanÄ±cÄ±lar</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ”§</i> <span>Site AyarlarÄ±</span>
                </a>
                <a href="#" class="menu-item">
                    <i>ğŸ”</i> <span>GÃ¼venlik</span>
                </a>
                <a href="#" class="menu-item" onclick="logout()">
                    <i>ğŸšª</i> <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Topbar -->
        <div class="topbar">
            <div class="topbar-left">
                <h1>Kategori YÃ¶netimi</h1>
                <p>Sitenizdeki kategorileri yÃ¶netin</p>
            </div>
            <div class="topbar-right">
                <div class="topbar-user">
                    <div class="user-avatar" id="userAvatar">A</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Admin User</div>
                        <div class="user-role" id="userRole">YÃ¶netici</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Type Tabs -->
        <div class="content-tabs">
            <button class="tab-button active" onclick="switchCategoryType('blog')">Blog Kategorileri</button>
            <button class="tab-button" onclick="switchCategoryType('project')">Proje Kategorileri</button>
            <button class="tab-button" onclick="switchCategoryType('service')">Hizmet Kategorileri</button>
        </div>

        <!-- Add Category Form -->
        <div class="add-category-form">
            <h3>Yeni Kategori Ekle</h3>
            <form id="addCategoryForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="categoryName">Kategori AdÄ± *</label>
                        <input type="text" id="categoryName" name="categoryName" placeholder="Kategori adÄ±nÄ± girin" required>
                    </div>
                    <div class="form-group">
                        <label for="categorySlug">URL Slug</label>
                        <input type="text" id="categorySlug" name="categorySlug" placeholder="kategori-adi">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="categoryDescription">AÃ§Ä±klama</label>
                        <textarea id="categoryDescription" name="categoryDescription" rows="2" placeholder="Kategori aÃ§Ä±klamasÄ± (opsiyonel)"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="categoryColor">Renk</label>
                        <input type="color" id="categoryColor" name="categoryColor" value="#667eea">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Kategori Ekle</button>
                </div>
            </form>
        </div>

        <!-- Blog Categories -->
        <div id="blogCategories" class="categories-section">
            <div class="section-header">
                <h2>Blog Kategorileri</h2>
                <span class="category-count">Toplam: <strong>5</strong> kategori</span>
            </div>
            
            <div class="categories-grid">
                <div class="category-card" data-id="1">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #667eea;"></div>
                        <div class="category-info">
                            <h3>MimarlÄ±k</h3>
                            <p>Mimari tasarÄ±m ve projeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">12 yazÄ±</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(1, 'blog')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(1, 'blog')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="2">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #f093fb;"></div>
                        <div class="category-info">
                            <h3>Ä°nÅŸaat</h3>
                            <p>Ä°nÅŸaat teknikleri ve malzemeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">8 yazÄ±</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(2, 'blog')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(2, 'blog')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="3">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #4facfe;"></div>
                        <div class="category-info">
                            <h3>Teknoloji</h3>
                            <p>MimarlÄ±kta teknoloji kullanÄ±mÄ±</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">6 yazÄ±</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(3, 'blog')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(3, 'blog')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="4">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #43e97b;"></div>
                        <div class="category-info">
                            <h3>Ä°Ã§ MimarlÄ±k</h3>
                            <p>Ä°Ã§ mekan tasarÄ±mÄ±</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">10 yazÄ±</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(4, 'blog')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(4, 'blog')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="5">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #fa709a;"></div>
                        <div class="category-info">
                            <h3>Ã‡evre</h3>
                            <p>SÃ¼rdÃ¼rÃ¼lebilir mimarlÄ±k</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">7 yazÄ±</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(5, 'blog')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(5, 'blog')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Project Categories -->
        <div id="projectCategories" class="categories-section" style="display: none;">
            <div class="section-header">
                <h2>Proje Kategorileri</h2>
                <span class="category-count">Toplam: <strong>4</strong> kategori</span>
            </div>
            
            <div class="categories-grid">
                <div class="category-card" data-id="1">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #667eea;"></div>
                        <div class="category-info">
                            <h3>Konut Projeleri</h3>
                            <p>Residential projeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">5 proje</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(1, 'project')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(1, 'project')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="2">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #f093fb;"></div>
                        <div class="category-info">
                            <h3>Ticari Projeler</h3>
                            <p>Commercial projeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">3 proje</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(2, 'project')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(2, 'project')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="3">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #4facfe;"></div>
                        <div class="category-info">
                            <h3>EndÃ¼striyel Projeler</h3>
                            <p>Industrial projeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">2 proje</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(3, 'project')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(3, 'project')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="4">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #43e97b;"></div>
                        <div class="category-info">
                            <h3>Kamu Projeleri</h3>
                            <p>Public projeler</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">2 proje</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(4, 'project')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(4, 'project')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Service Categories -->
        <div id="serviceCategories" class="categories-section" style="display: none;">
            <div class="section-header">
                <h2>Hizmet Kategorileri</h2>
                <span class="category-count">Toplam: <strong>6</strong> kategori</span>
            </div>
            
            <div class="categories-grid">
                <div class="category-card" data-id="1">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #667eea;"></div>
                        <div class="category-info">
                            <h3>Mimari TasarÄ±m</h3>
                            <p>Mimari proje tasarÄ±mÄ±</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(1, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(1, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="2">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #f093fb;"></div>
                        <div class="category-info">
                            <h3>Ä°Ã§ MimarlÄ±k</h3>
                            <p>Ä°Ã§ mekan tasarÄ±m hizmetleri</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(2, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(2, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="3">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #4facfe;"></div>
                        <div class="category-info">
                            <h3>3D Modelleme</h3>
                            <p>3D gÃ¶rselleÅŸtirme hizmetleri</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(3, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(3, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="4">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #43e97b;"></div>
                        <div class="category-info">
                            <h3>Proje YÃ¶netimi</h3>
                            <p>Ä°nÅŸaat proje yÃ¶netimi</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(4, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(4, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="5">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #fa709a;"></div>
                        <div class="category-info">
                            <h3>DanÄ±ÅŸmanlÄ±k</h3>
                            <p>MimarlÄ±k danÄ±ÅŸmanlÄ±k hizmetleri</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(5, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(5, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>

                <div class="category-card" data-id="6">
                    <div class="category-header">
                        <div class="category-color" style="background-color: #ffecd2;"></div>
                        <div class="category-info">
                            <h3>EÄŸitim</h3>
                            <p>MimarlÄ±k eÄŸitim programlarÄ±</p>
                        </div>
                        <div class="category-stats">
                            <span class="stat">Aktif</span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn-icon btn-edit" onclick="editCategory(6, 'service')" title="DÃ¼zenle">âœï¸</button>
                        <button class="btn-icon btn-delete" onclick="deleteCategory(6, 'service')" title="Sil">ğŸ—‘ï¸</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Edit Category Modal -->
    <div id="editCategoryModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Kategori DÃ¼zenle</h3>
                <button class="modal-close" onclick="closeEditModal()">Ã—</button>
            </div>
            <form id="editCategoryForm">
                <input type="hidden" id="editCategoryId" name="categoryId">
                <input type="hidden" id="editCategoryType" name="categoryType">
                
                <div class="form-group">
                    <label for="editCategoryName">Kategori AdÄ± *</label>
                    <input type="text" id="editCategoryName" name="categoryName" required>
                </div>
                
                <div class="form-group">
                    <label for="editCategorySlug">URL Slug</label>
                    <input type="text" id="editCategorySlug" name="categorySlug">
                </div>
                
                <div class="form-group">
                    <label for="editCategoryDescription">AÃ§Ä±klama</label>
                    <textarea id="editCategoryDescription" name="categoryDescription" rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editCategoryColor">Renk</label>
                    <input type="color" id="editCategoryColor" name="categoryColor">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">GÃ¼ncelle</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentCategoryType = 'blog';

        // Sayfa yÃ¼klendiÄŸinde
        window.addEventListener('load', function() {
            checkAuth();
            loadUserInfo();
        });

        // KullanÄ±cÄ± giriÅŸi kontrolÃ¼
        function checkAuth() {
            const adminUser = localStorage.getItem('adminUser');
            if (!adminUser) {
                window.location.href = 'login.html';
                return;
            }
        }

        // KullanÄ±cÄ± bilgilerini yÃ¼kle
        function loadUserInfo() {
            const adminUser = localStorage.getItem('adminUser');
            if (adminUser) {
                const user = JSON.parse(adminUser);
                const initial = user.name ? user.name.charAt(0).toUpperCase() : 'A';
                document.getElementById('userAvatar').textContent = initial;
                document.getElementById('userName').textContent = user.name || 'Admin';
                document.getElementById('userRole').textContent = user.role || 'YÃ¶netici';
            }
        }

        // Kategori tipi deÄŸiÅŸtirme
        function switchCategoryType(type) {
            currentCategoryType = type;
            
            // Tab butonlarÄ±nÄ± gÃ¼ncelle
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // BÃ¶lÃ¼mleri gÃ¶ster/gizle
            document.querySelectorAll('.categories-section').forEach(section => {
                section.style.display = 'none';
            });
            
            document.getElementById(type + 'Categories').style.display = 'block';
        }

        // Kategori ekleme formu
        document.getElementById('addCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const categoryName = formData.get('categoryName');
            const categorySlug = formData.get('categorySlug') || generateSlug(categoryName);
            const categoryDescription = formData.get('categoryDescription');
            const categoryColor = formData.get('categoryColor');
            
            if (!categoryName) {
                showNotification('Kategori adÄ± zorunludur!', 'error');
                return;
            }
            
            // Demo ekleme
            showNotification('Kategori baÅŸarÄ±yla eklendi!', 'success');
            this.reset();
        });

        // Kategori dÃ¼zenle
        function editCategory(id, type) {
            // Demo veri
            const categoryData = {
                name: 'MimarlÄ±k',
                slug: 'mimarlik',
                description: 'Mimari tasarÄ±m ve projeler',
                color: '#667eea'
            };
            
            document.getElementById('editCategoryId').value = id;
            document.getElementById('editCategoryType').value = type;
            document.getElementById('editCategoryName').value = categoryData.name;
            document.getElementById('editCategorySlug').value = categoryData.slug;
            document.getElementById('editCategoryDescription').value = categoryData.description;
            document.getElementById('editCategoryColor').value = categoryData.color;
            
            document.getElementById('editCategoryModal').style.display = 'block';
        }

        // Kategori sil
        function deleteCategory(id, type) {
            if (confirm('Bu kategoriyi silmek istediÄŸinize emin misiniz?')) {
                showNotification('Kategori silindi!', 'success');
            }
        }

        // DÃ¼zenleme modalÄ±nÄ± kapat
        function closeEditModal() {
            document.getElementById('editCategoryModal').style.display = 'none';
        }

        // DÃ¼zenleme formu
        document.getElementById('editCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const categoryName = formData.get('categoryName');
            
            if (!categoryName) {
                showNotification('Kategori adÄ± zorunludur!', 'error');
                return;
            }
            
            showNotification('Kategori gÃ¼ncellendi!', 'success');
            closeEditModal();
        });

        // Slug oluÅŸtur
        function generateSlug(text) {
            return text
                .toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .trim('-');
        }

        // Kategori adÄ± deÄŸiÅŸtiÄŸinde slug oluÅŸtur
        document.getElementById('categoryName').addEventListener('input', function(e) {
            const slug = generateSlug(e.target.value);
            document.getElementById('categorySlug').value = slug;
        });

        // Ã‡Ä±kÄ±ÅŸ yap
        function logout() {
            if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) {
                localStorage.removeItem('adminUser');
                window.location.href = 'login.html';
            }
        }

        // Bildirim gÃ¶ster
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = 'alert alert-' + type;
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '10000';
            notification.style.minWidth = '300px';
            notification.style.animation = 'fadeIn 0.3s ease-in';
            
            document.body.appendChild(notification);
            
            setTimeout(function() {
                notification.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(function() {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Modal dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda kapat
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('editCategoryModal');
            if (e.target === modal) {
                closeEditModal();
            }
        });
    </script>
</body>
</html>
